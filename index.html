<!DOCTYPE html>
<html lang="it">
<head>
    <!-- Testa rimane uguale alla versione precedente -->
    <!-- ... (mantieni tutto lo stile CSS esistente) ... -->
</head>
<body>
    <!-- Fiori decorativi di sfondo (mantieni) -->
    <div class="flower flower-1">ğŸŒ¸</div>
    <div class="flower flower-2">ğŸŒº</div>
    <div class="flower flower-3">ğŸŒ·</div>
    <div class="flower flower-4">ğŸŒ¼</div>
    <div class="flower flower-5">ğŸŒ»</div>

    <div class="header">
        <div class="container">
            <h1>ğŸµ Festival Musicale Romano di Lombardia 2025 ğŸµ</h1>
            <p class="subtitle">Classe 4 ASU - Ascolta i brani di Wele Abou, vota e decidi il vincitore!</p>
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-number" id="totalSongs">16</div>
                    <div class="stat-label">Brani in gara</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="totalVotes">0</div>
                    <div class="stat-label">Voti totali</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="avgRating">0.0</div>
                    <div class="stat-label">Valutazione media</div>
                </div>
            </div>
        </div>
    </div>

    <div class="main-content">
        <div class="container">
            <!-- Rimuovi la sezione di upload e sostituisci con questa -->
            <div class="file-upload" style="text-align: center;">
                <h2>ğŸ¬ Brani in Concorso</h2>
                <p>Classe 4 ASU - Ascolta tutti i brani e vota il tuo preferito!</p>
            </div>

            <div class="controls">
                <button class="btn" onclick="showResults()">ğŸ† Mostra Classifica</button>
                <button class="btn secondary" onclick="resetVotes()">ğŸ”„ Reset Voti</button>
            </div>

            <div class="songs-grid" id="songsContainer">
                <!-- I video verranno aggiunti dinamicamente qui dallo script -->
            </div>

            <div class="leaderboard" id="leaderboard" style="display: none;">
                <h2>ğŸ† Classifica Festival Classe 4 ASU</h2>
                <div class="podium" id="podium">
                    <!-- Il podio verrÃ  generato dinamicamente -->
                </div>
            </div>
        </div>
    </div>

    <div class="notification" id="notification"></div>

    <script>
        // Lista dei video pre-caricati (sostituisci con i tuoi percorsi)
        const videoFiles = [
            { id: 1, title: "Airoldi Thomas - Thomas, tutti noi ti vogliamo bene", filename: "01.Airoldi Thomas_ Thomas, tutti noi ti vogliamo bene.mp4" },
            { id: 2, title: "Bianchi Luca - Il mio brano", filename: "02.Bianchi Luca_ Il mio brano.mp4" },
            // Aggiungi qui gli altri 14 video seguendo lo stesso formato
            // { id: 3, title: "Cognome Nome - Titolo brano", filename: "03.Cognome Nome_Titolo brano.mp4" },
            // ...
            { id: 16, title: "Ultimo Studente - Il mio capolavoro", filename: "16.Ultimo Studente_Il mio capolavoro.mp4" }
        ];

        let songs = [];
        let songCounter = 16; // Impostato a 16 perchÃ© abbiamo 16 video pre-caricati

        // Carica i video all'avvio
        document.addEventListener('DOMContentLoaded', function() {
            videoFiles.forEach(video => {
                const song = {
                    id: video.id,
                    title: video.title,
                    artist: "Wele Abou ğŸ¤",
                    url: video.filename, // Percorso relativo al file video
                    votes: 0,
                    ratings: [],
                    avgRating: 0,
                    currentUserRating: 0
                };
                
                songs.push(song);
                createSongCard(song);
            });
            
            updateStats();
        });

        // Funzione per creare le card dei brani (rimane uguale alla versione precedente)
        function createSongCard(song) {
            const container = document.getElementById('songsContainer');
            const songCard = document.createElement('div');
            songCard.className = 'song-card';
            songCard.id = `song-${song.id}`;
            
            songCard.innerHTML = `
                <div class="song-info">
                    <div class="song-title">ğŸµ ${song.title}</div>
                    <div class="song-artist">ğŸ¤ ${song.artist}</div>
                </div>
                <div class="video-container">
                    <video controls preload="metadata" id="video-${song.id}">
                        <source src="${song.url}" type="video/mp4">
                        Il tuo browser non supporta la riproduzione video.
                    </video>
                </div>
                <div class="voting-section">
                    <div class="rating-instruction">ğŸŒŸ Clicca sulle stelle per valutare:</div>
                    <div class="rating-stars" id="stars-${song.id}">
                        <button class="star" onclick="selectRating(${song.id}, 1)">â­</button>
                        <button class="star" onclick="selectRating(${song.id}, 2)">â­</button>
                        <button class="star" onclick="selectRating(${song.id}, 3)">â­</button>
                        <button class="star" onclick="selectRating(${song.id}, 4)">â­</button>
                        <button class="star" onclick="selectRating(${song.id}, 5)">â­</button>
                    </div>
                    <div class="current-rating" id="current-rating-${song.id}">
                        Nessuna valutazione selezionata
                    </div>
                    <button class="vote-btn" onclick="submitVote(${song.id})" id="vote-btn-${song.id}">
                        ğŸŒ¸ Conferma il tuo voto ğŸŒ¸
                    </button>
                    <div class="vote-count" id="vote-count-${song.id}">
                        ğŸŒº Voti: 0 | Valutazione media: 0.0â­
                    </div>
                </div>
            `;
            
            container.appendChild(songCard);

            // Test il video
            const video = document.getElementById(`video-${song.id}`);
            video.addEventListener('loadeddata', function() {
                console.log(`Video ${song.id} caricato correttamente`);
            });

            video.addEventListener('error', function(e) {
                console.error(`Errore video ${song.id}:`, e);
                showNotification(`âš ï¸ Problema con il video: ${song.title}`);
            });
        }

        // Le restanti funzioni (selectRating, submitVote, updateStats, showResults, resetVotes, showNotification)
        // rimangono IDENTICHE alla versione precedente
        // ... (incolla qui tutte le altre funzioni dello script precedente) ...
    </script>
</body>
</html>
